---
ci:
  collect:
    numberOfRuns: 3
    staticDistDir: exampleSite/public
    url:
      - http://localhost/
      - http://localhost/404.html
      - http://localhost/posts/usage/getting-started/
    settings:
      chromeFlags: "--no-sandbox"
      onlyCategories: ['performance', 'accessibility', 'best-practices', 'seo']
      skipAudits: ["color-contrast", "uses-long-cache-ttl", "csp-xss", "bf-cache", "is-crawlable"]
  assert:
    preset: "lighthouse:no-pwa"
    assertions:
      color-contrast: off
      uses-long-cache-ttl: off
      csp-xss: off
      # FIXME: https://github.com/GoogleChrome/lighthouse/issues/14957
      bf-cache: off
      is-crawlable: off
      tap-targets: warn
      unsized-images: warn
      # FIXME: https://github.com/GoogleChrome/lighthouse/issues/11460
      categories:performance:
        - warn
        - minScore: 0.95
  upload:
    target: filesystem
    outputDir: lhci_reports
